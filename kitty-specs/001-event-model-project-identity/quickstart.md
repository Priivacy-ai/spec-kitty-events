# Quickstart: Event Model Project Identity

**Feature**: 001-event-model-project-identity
**Date**: 2026-02-07

## Updated Basic Event Emission

After this feature, every `Event` requires a `project_uuid`:

```python
import uuid
from datetime import datetime
from spec_kitty_events import (
    Event,
    LamportClock,
    InMemoryClockStorage,
    InMemoryEventStore,
)

# Setup
clock_storage = InMemoryClockStorage()
event_store = InMemoryEventStore()
clock = LamportClock(node_id="alice", storage=clock_storage)

# Project identity (generated by CLI during spec-kitty init)
project_id = uuid.uuid4()

# Emit event with project identity
clock.tick()
event = Event(
    event_id="01ARZ3NDEKTSV4RRFFQ69G5FAV",
    event_type="WPStatusChanged",
    aggregate_id="WP001",
    timestamp=datetime.now(),
    node_id="alice",
    lamport_clock=clock.current(),
    payload={"state": "doing"},
    project_uuid=project_id,
    project_slug="my-project",
)
event_store.save_event(event)

# Access identity fields
print(event.project_uuid)   # UUID('550e8400-...')
print(event.project_slug)   # 'my-project'
```

## Serialization Round-Trip

```python
# Serialize
data = event.to_dict()
print(data["project_uuid"])  # UUID object
print(data["project_slug"])  # 'my-project' or None

# Deserialize (accepts UUID string or object)
restored = Event.from_dict(data)
assert restored.project_uuid == event.project_uuid
```

## Optional Slug

`project_slug` is optional — only `project_uuid` is required:

```python
event = Event(
    event_id="01ARZ3NDEKTSV4RRFFQ69G5FAV",
    event_type="FeatureCreated",
    aggregate_id="FEAT001",
    timestamp=datetime.now(),
    node_id="alice",
    lamport_clock=1,
    project_uuid=uuid.uuid4(),
    # project_slug omitted — defaults to None
)
assert event.project_slug is None
```

## Validation

Invalid UUIDs are rejected at creation time:

```python
from pydantic import ValidationError

try:
    event = Event(
        event_id="01ARZ3NDEKTSV4RRFFQ69G5FAV",
        event_type="Test",
        aggregate_id="AGG001",
        timestamp=datetime.now(),
        node_id="alice",
        lamport_clock=0,
        project_uuid="not-a-uuid",  # Invalid!
    )
except ValidationError as e:
    print("Rejected:", e)
```
